<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toast ë©”ì‹œì§€ êµ¬í˜„ ë°ëª¨ (ë‹¨ì¼ íŒŒì¼)</title>
  <style>
    :root{
      --toast-bg: rgba(30, 41, 59, 0.9);       /* slategrey/900 with opacity */
      --toast-fg: #f8fafc;                     /* slate-50 */
      --toast-border: rgba(148, 163, 184, .35);
      --toast-shadow: 0 10px 25px rgba(0,0,0,.25), 0 2px 8px rgba(0,0,0,.15);

      --info: #0ea5e9;       /* sky-500 */
      --success: #22c55e;    /* green-500 */
      --warning: #f59e0b;    /* amber-500 */
      --error: #ef4444;      /* red-500 */
    }

    /* ì»¨í…Œì´ë„ˆ: í¬ì§€ì…˜ë³„ 4ê°œë¥¼ ë™ì ìœ¼ë¡œ ìƒì„± */
    .toast-container{
      position: fixed;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      padding: .75rem;
      pointer-events: none; /* í† ìŠ¤íŠ¸ ë°”ê¹¥ í´ë¦­ì€ í†µê³¼ */
    }

    .top-left{ top: .75rem; left: .75rem; align-items: flex-start; }
    .top-right{ top: .75rem; right: .75rem; align-items: flex-end; }
    .bottom-left{ bottom: .75rem; left: .75rem; align-items: flex-start; }
    .bottom-right{ bottom: .75rem; right: .75rem; align-items: flex-end; }

    /* í† ìŠ¤íŠ¸ ë°•ìŠ¤ */
    .toast{
      pointer-events: auto; /* í† ìŠ¤íŠ¸ ë‚´ë¶€ í´ë¦­ í™œì„±í™” */
      max-width: min(90vw, 420px);
      display: grid;
      grid-template-columns: auto 1fr auto; /* ì•„ì´ì½˜ | ë‚´ìš© | ë‹«ê¸°/ì•¡ì…˜ */
      gap: .75rem;
      align-items: center;
      padding: .75rem .9rem;
      border-radius: .75rem;
      color: var(--toast-fg);
      background: var(--toast-bg);
      border: 1px solid var(--toast-border);
      backdrop-filter: blur(6px) saturate(120%);
      box-shadow: var(--toast-shadow);
      overflow: hidden;
      position: relative;
      opacity: 0;
      transform: translateY(-6px) scale(.98);
      animation: toast-in 220ms cubic-bezier(.2,.8,.2,1) forwards;
    }

    @keyframes toast-in{
      to{ opacity:1; transform: translateY(0) scale(1);} 
    }
    @keyframes toast-out{
      to{ opacity:0; transform: translateY(-6px) scale(.98);} 
    }

    /* ëª¨ì…˜ ìµœì†Œí™” ì‚¬ìš©ì ì„¤ì • ì¡´ì¤‘ */
    @media (prefers-reduced-motion: reduce){
      .toast{ animation: none; opacity: 1; transform: none; }
    }

    .toast__icon{
      width: 1.25rem; height: 1.25rem; display: grid; place-items: center;
      border-radius: .5rem; background: rgba(255,255,255,.08);
      border: 1px solid var(--toast-border);
      font-size: .95rem; line-height: 1; 
    }

    .toast__content{ display:flex; flex-direction: column; gap: .2rem; min-width: 0; }
    .toast__title{ font-weight: 700; font-size: .95rem; letter-spacing: .01em; }
    .toast__desc{ font-size: .86rem; color: #e2e8f0; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }

    .toast__actions{ display:flex; align-items:center; gap:.25rem; margin-left: .25rem; }
    .toast__btn{
      appearance: none; border: 1px solid var(--toast-border); background: rgba(255,255,255,.06);
      color: var(--toast-fg); border-radius: .55rem; padding: .4rem .6rem; font-size: .8rem; cursor: pointer;
    }
    .toast__btn:hover{ background: rgba(255,255,255,.12); }

    .toast__close{ appearance:none; border:none; background:transparent; color:#cbd5e1; cursor:pointer; padding:.25rem; border-radius:.5rem; }
    .toast__close:hover{ background: rgba(255,255,255,.08); color:#fff; }

    /* íƒ€ì… ë°°ì§€(ì¢Œì¸¡ ì»¬ëŸ¬ ë°”) */
    .toast::before{
      content:""; position:absolute; inset:0 0 0 auto; width:4px; border-radius:.5rem 0 0 .5rem; opacity:.95;
    }
    .toast--info::before{ background: var(--info); right:auto; left:0; }
    .toast--success::before{ background: var(--success); right:auto; left:0; }
    .toast--warning::before{ background: var(--warning); right:auto; left:0; }
    .toast--error::before{ background: var(--error); right:auto; left:0; }

    /* ì§„í–‰ë°”(ìë™ ë‹«í˜ í‘œì‹œ) */
    .toast__progress{ position:absolute; left:0; right:0; bottom:0; height:3px; background: rgba(255,255,255,.12); overflow:hidden; }
    .toast__progress > span{ display:block; height:100%; width:100%; transform-origin:left center; animation: progress linear forwards; }
    @keyframes progress{ from{ transform: scaleX(1);} to{ transform: scaleX(0);} }

    /* ë°ëª¨ ì˜ì—­ */
    .demo{ max-width: 900px; margin: 80px auto; padding: 2rem; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; }
    .demo h1{ font-size: clamp(1.2rem, 2vw, 1.8rem); margin-bottom: .75rem; }
    .demo .row{ display:flex; flex-wrap: wrap; gap:.5rem; align-items:center; margin:.5rem 0 1rem; }
    .demo select, .demo input, .demo button{ font: inherit; }
    .demo button{ padding:.6rem .9rem; border-radius:.6rem; border:1px solid #cbd5e1; background:#f8fafc; cursor:pointer; }
    .demo button:hover{ background:#eef2f7; }
    .demo code{ background:#0b1220; color:#c7d2fe; padding:.25rem .4rem; border-radius:.4rem; }
  </style>
</head>
<body>
  <!-- ë°ëª¨ UI (í•„ìš” ì—†ìœ¼ë©´ ì´ ì„¹ì…˜ë§Œ ì‚­ì œ) -->
  <div class="demo">
    <h1>Toast ë©”ì‹œì§€ êµ¬í˜„ (HTML + CSS + JS ë‹¨ì¼ íŒŒì¼)</h1>
    <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ì–‘í•œ íƒ€ì…ì˜ í† ìŠ¤íŠ¸ë¥¼ ë„ì›Œë³´ì„¸ìš”. ì‹¤ì œ ì‚¬ìš© ì‹œì—” <code>showToast({...})</code> í•¨ìˆ˜ë§Œ í˜¸ì¶œí•˜ë©´ ë©ë‹ˆë‹¤.</p>

    <div class="row">
      <label>í¬ì§€ì…˜:</label>
      <select id="pos">
        <option value="top-right">top-right</option>
        <option value="top-left">top-left</option>
        <option value="bottom-right">bottom-right</option>
        <option value="bottom-left">bottom-left</option>
      </select>
      <label style="margin-left:.75rem;">ì§€ì†(ms):</label>
      <input id="dur" type="number" value="3500" min="1000" step="500" style="width:110px;" />
      <label style="margin-left:.75rem;">ìµœëŒ€ ë™ì‹œ í‘œì‹œ:</label>
      <input id="max" type="number" value="4" min="1" max="8" style="width:70px;" />
    </div>

    <div class="row">
      <button onclick="demoToast('info')">ì •ë³´(Info)</button>
      <button onclick="demoToast('success')">ì„±ê³µ(Success)</button>
      <button onclick="demoToast('warning')">ê²½ê³ (Warning)</button>
      <button onclick="demoToast('error')">ì˜¤ë¥˜(Error)</button>
      <button onclick="demoActionToast()">ì•¡ì…˜ ë²„íŠ¼</button>
      <button onclick="demoQueue()">ì—¬ëŸ¬ ê°œ ì˜ê¸°</button>
    </div>
  </div>

  <script>
    // ===== ì ‘ê·¼ì„±: ë¼ì´ë¸Œ ë¦¬ì „ =====
    const ariaLive = document.createElement('div');
    ariaLive.setAttribute('aria-live','polite');
    ariaLive.setAttribute('aria-atomic','true');
    ariaLive.style.position = 'fixed';
    ariaLive.style.left = '-9999px';
    document.body.appendChild(ariaLive);

    // ===== ì»¨í…Œì´ë„ˆ ìœ í‹¸ =====
    const POSITIONS = ['top-left','top-right','bottom-left','bottom-right'];
    const containers = new Map();

    function ensureContainer(position = 'top-right'){
      if(!POSITIONS.includes(position)) position = 'top-right';
      if(containers.has(position)) return containers.get(position);
      const el = document.createElement('div');
      el.className = `toast-container ${position.replace(/\s+/g,'-')}`;
      el.id = `toast-container-${position}`;
      document.body.appendChild(el);
      containers.set(position, el);
      return el;
    }

    // ===== í† ìŠ¤íŠ¸ ìƒì„± ë©”ì¸ í•¨ìˆ˜ =====
    /**
     * showToast(options)
     * @param {Object} options
     * @param {('info'|'success'|'warning'|'error')} [options.type='info']
     * @param {String} options.title - êµµì€ ì œëª©(ì„ íƒ)
     * @param {String} options.message - ë³¸ë¬¸(í•„ìˆ˜)
     * @param {Number} [options.duration=3500] - ìë™ ë‹«í˜(ms). 0 ë˜ëŠ” ìŒìˆ˜ë©´ ìë™ ë‹«í˜ ì—†ìŒ
     * @param {('top-left'|'top-right'|'bottom-left'|'bottom-right')} [options.position='top-right']
     * @param {Boolean} [options.dismissible=true] - ë‹«ê¸° ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€
     * @param {{label:string, onClick:Function}|null} [options.action] - ì•¡ì…˜ ë²„íŠ¼(ì„ íƒ)
     * @param {Number} [options.maxVisible=4] - í¬ì§€ì…˜ë³„ ìµœëŒ€ ë™ì‹œ í‘œì‹œ ê°œìˆ˜
     */
    function showToast(options={}){
      const {
        type='info',
        title='',
        message='',
        duration=3500,
        position='top-right',
        dismissible=true,
        action=null,
        maxVisible=4
      } = options;

      if(!message) return;

      // ë¼ì´ë¸Œ ë¦¬ì „ì— í…ìŠ¤íŠ¸ ë°˜ì˜(ìŠ¤í¬ë¦°ë¦¬ë” ê³µì§€)
      ariaLive.textContent = `${title? title+': ' : ''}${message}`;

      const container = ensureContainer(position);
      const toast = document.createElement('div');
      toast.className = `toast toast--${type}`;
      toast.setAttribute('role', type === 'error' ? 'alert' : 'status');
      toast.setAttribute('aria-live', type === 'error' ? 'assertive' : 'polite');

      // ì•„ì´ì½˜ ì„ íƒ(ê¸°ë³¸ ì´ëª¨ì§€, ì›í•˜ë©´ SVGë¡œ êµì²´)
      const iconMap = { info:'â„¹ï¸', success:'âœ…', warning:'âš ï¸', error:'â›”' };
      const icon = document.createElement('div');
      icon.className = 'toast__icon';
      icon.textContent = iconMap[type] || 'ğŸ””';

      const content = document.createElement('div');
      content.className = 'toast__content';

      if(title){
        const h = document.createElement('div');
        h.className = 'toast__title';
        h.textContent = title;
        content.appendChild(h);
      }
      const p = document.createElement('div');
      p.className = 'toast__desc';
      p.textContent = message;
      content.appendChild(p);

      const actions = document.createElement('div');
      actions.className = 'toast__actions';

      if(action && action.label){
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'toast__btn';
        btn.textContent = action.label;
        btn.addEventListener('click', () => {
          try{ action.onClick && action.onClick(); }catch(e){}
          closeToast(toast);
        });
        actions.appendChild(btn);
      }

      if(dismissible){
        const close = document.createElement('button');
        close.type = 'button';
        close.className = 'toast__close';
        close.setAttribute('aria-label', 'ë‹«ê¸°');
        close.innerHTML = '&times;';
        close.addEventListener('click', () => closeToast(toast));
        actions.appendChild(close);
      }

      toast.append(icon, content, actions);

      // ì§„í–‰ë°” (ìë™ ë‹«í˜ ì„¤ì • ì‹œ)
      let hideTimer = null;
      if(duration > 0){
        const bar = document.createElement('div');
        bar.className = 'toast__progress';
        const span = document.createElement('span');
        span.style.animationDuration = duration + 'ms';
        span.style.background = ({info:'var(--info)', success:'var(--success)', warning:'var(--warning)', error:'var(--error)'}[type]) || 'var(--info)';
        bar.appendChild(span);
        toast.appendChild(bar);

        hideTimer = setTimeout(() => closeToast(toast), duration + 20);
      }

      // í¬ì§€ì…˜ë³„ ìµœëŒ€ ë™ì‹œ í‘œì‹œ ì œí•œ/ìŠ¤íƒ ê´€ë¦¬
      const current = Array.from(container.children);
      const overflow = current.length - (maxVisible - 1);
      if(overflow > 0){
        // ì˜¤ë˜ëœ í† ìŠ¤íŠ¸ë¶€í„° ì œê±°
        for(let i=0;i<overflow;i++){
          closeToast(current[i]);
        }
      }

      // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ì¼ì‹œ ì •ì§€
      toast.addEventListener('mouseenter', () => { if(hideTimer) clearTimeout(hideTimer); });
      toast.addEventListener('mouseleave', () => { if(duration>0) hideTimer = setTimeout(() => closeToast(toast), 900); });

      container.appendChild(toast);

      // ìŠ¤ì™€ì´í”„(ëª¨ë°”ì¼)ë¡œ ë‹«ê¸°: ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì‚´ì§
      let startX = null;
      toast.addEventListener('touchstart', e => startX = e.touches[0].clientX, {passive:true});
      toast.addEventListener('touchmove', e => {
        if(startX===null) return; 
        const dx = e.touches[0].clientX - startX;
        if(Math.abs(dx)>8){ toast.style.transform = `translateX(${dx}px)`; toast.style.opacity = String(Math.max(0, 1 - Math.abs(dx)/120)); }
      }, {passive:true});
      toast.addEventListener('touchend', e => {
        if(startX===null) return; 
        const dx = e.changedTouches[0].clientX - startX; startX=null;
        if(Math.abs(dx) > 80){ closeToast(toast); }
        else{ toast.style.transform=''; toast.style.opacity=''; }
      });

      return toast;
    }

    function closeToast(toast){
      if(!toast || toast.dataset.closing) return;
      toast.dataset.closing = '1';
      toast.style.animation = 'toast-out 180ms ease forwards';
      setTimeout(() => toast?.remove(), 180);
    }

    // ===== ë°ëª¨ í—¬í¼ =====
    function getDemoOpts(){
      const position = document.getElementById('pos').value;
      const duration = Number(document.getElementById('dur').value || 3500);
      const maxVisible = Number(document.getElementById('max').value || 4);
      return { position, duration, maxVisible };
    }

    function demoToast(type){
      const {position, duration, maxVisible} = getDemoOpts();
      const map = {
        info:   {title:'ì•ˆë‚´', message:'ì¼ë°˜ ì •ë³´ í† ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.'},
        success:{title:'ì„±ê³µ', message:'ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê³„ì† ì§„í–‰í•˜ì„¸ìš”.'},
        warning:{title:'ê²½ê³ ', message:'ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.'},
        error:  {title:'ì˜¤ë¥˜', message:'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.'}
      }
      showToast({ type, ...map[type], position, duration, maxVisible });
    }

    function demoActionToast(){
      const {position, duration, maxVisible} = getDemoOpts();
      showToast({
        type: 'info',
        title: 'ë³µì› ê°€ëŠ¥',
        message: 'íŒŒì¼ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.',
        position, duration, maxVisible,
        action: {
          label: 'ë˜ëŒë¦¬ê¸°',
          onClick(){ showToast({ type:'success', title:'ë³µì› ì™„ë£Œ', message:'íŒŒì¼ì„ ë³µêµ¬í–ˆìŠµë‹ˆë‹¤.', position }); }
        }
      });
    }

    function demoQueue(){
      const {position, duration, maxVisible} = getDemoOpts();
      const types = ['info','success','warning','error'];
      let i = 0;
      const iv = setInterval(() =>{
        if(i>=8){ clearInterval(iv); return; }
        const t = types[i % types.length];
        showToast({ type:t, title:t.toUpperCase(), message:`í í…ŒìŠ¤íŠ¸ #${i+1}`, position, duration, maxVisible });
        i++;
      }, 500);
    }
  </script>
</body>
</html>