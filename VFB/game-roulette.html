<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ë¬´ë£Œ ìŒì‹/ì¿ í° ë£°ë ›ê²Œì„ - ë¼ì˜¤ì¶©ì¹­í› ê¶ˆ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }

      body {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f7f2ea;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        color: #3a2415;
      }

      /* ------------------------
         ë©”ì¸ ë°•ìŠ¤ í¬ê¸° í™•ëŒ€
      ------------------------- */
      .game-shell {
        width: 100%;
        max-width: 900px; /* ê¸°ì¡´ ëŒ€ë¹„ ì•½ 2ë°° */
        padding: 40px;
        background: #fffaf5;
        border-radius: 24px;
        box-shadow: 0 16px 40px rgba(120, 72, 37, 0.18);
        border: 1px solid rgba(193, 160, 120, 0.4);
      }

      .game-header { text-align: center; margin-bottom: 24px; }
      .game-title { font-size: 26px; font-weight: 800; margin-bottom: 6px; }
      .game-sub { font-size: 14px; color: #6b4a30; }

      /* ------------------------
         2ì»¬ëŸ¼ êµ¬ì¡°: ë£°ë › + ë²”ë¡€
      ------------------------- */
      .content-row {
        display: grid;
        grid-template-columns: 1fr 260px; /* ì¢Œì¸¡ ë£°ë › ë„“ê²Œ, ìš°ì¸¡ ë²”ë¡€ */
        gap: 30px;
        align-items: center;
      }

      /* ------------------------
         ë£°ë › í¬ê¸° 2ë°° í™•ëŒ€
      ------------------------- */
      .wheel-wrap {
        position: relative;
        width: 380px;  /* ê¸°ì¡´ 240px â†’ 380px */
        aspect-ratio: 1 / 1;
        margin: 0 auto;
      }

      .wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 8px solid #f0e0ce;

        background: conic-gradient(
          #f97316 0deg 72deg,      /* 20% */
          #facc15 72deg 144deg,    /* 20% */
          #f9a8d4 144deg 216deg,   /* 20% */
          #a5b4fc 216deg 252deg,   /* 10% */
          #6ee7b7 252deg 288deg,   /* 10% */
          #e5e7eb 288deg 360deg    /* 20% */
        );
      }

      .wheel-inner {
        position: absolute;
        inset: 40%;
        border-radius: 50%;
        background: radial-gradient(circle at center, #fffaf5, #f3d7b3);
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
      }

      .pointer {
        z-index: 1;
        position: absolute;
        top: -18px;
        left: 50%;
        transform: translateX(-50%) rotate(180deg);
        width: 0;
        height: 0;
        border-left: 14px solid transparent;
        border-right: 14px solid transparent;
        border-bottom: 22px solid #c95327;
      }

      /* ------------------------
         ë²”ë¡€ (ìš°ì¸¡ ì •ë ¬)
      ------------------------- */
      .game-legend {
        display: grid;
        gap: 10px;
        font-size: 13px;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 10px;
        background: #f4e5d1;
      }

      .legend-color {
        width: 14px;
        height: 14px;
        border-radius: 50%;
      }

      .c1 { background: #f97316; }
      .c2 { background: #facc15; }
      .c3 { background: #f9a8d4; }
      .c4 { background: #a5b4fc; }
      .c5 { background: #6ee7b7; }
      .c6 { background: #e5e7eb; }

      /* ------------------------
         ì‹œë“œë²ˆí˜¸ ë¼ë””ì˜¤ ë²„íŠ¼ UI
      ------------------------- */
      .seed-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin: 20px 0;
      }

      .seed-btn {
        appearance: none;
        padding: 10px 16px;
        background: #fff;
        border-radius: 999px;
        border: 2px solid #c9a67a;
        cursor: pointer;
        font-size: 14px;
        transition: 0.2s ease;
      }

      .seed-btn:checked {
        background: #c9a67a;
        color: #fff;
        border-color: #c9a67a;
      }

      .btn-spin {
        padding: 14px 28px;
        font-size: 16px;
        font-weight: 700;
        border-radius: 999px;
        border: none;
        color: #fff;
        background: linear-gradient(120deg, #f97316, #fbbf24);
        cursor: pointer;
        display: block;
        margin: 0 auto;
      }

      .game-result {
        margin-top: 20px;
        text-align: center;
        font-size: 15px;
      }
    </style>
  </head>
  <body>

    <div class="game-shell">
      <header class="game-header">
        <h1 class="game-title">ë¬´ë£Œ ìŒì‹/ì¿ í° ë£°ë ›ê²Œì„</h1>
        <p class="game-sub">ë¼ì˜¤ì¶©ì¹­í› ê¶ˆì—ì„œ ì˜¤ëŠ˜ì˜ í–‰ìš´ì„ ë½‘ì•„ë³´ì„¸ìš”!</p>
      </header>

      <!-- ============================
           2ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ ì‹œì‘
      ============================= -->
      <div class="content-row">

        <!-- ë£°ë › -->
        <div class="wheel-wrap">
          <div class="pointer"></div>
          <div class="wheel" id="wheel">
            <div class="wheel-inner">â†‘</div>
          </div>
        </div>

        <!-- ë²”ë¡€ -->
        <div class="game-legend">
          <div class="legend-item"><span class="legend-color c1"></span> ìº” ìŒë£Œ 1ê°œ (20%)</div>
          <div class="legend-item"><span class="legend-color c2"></span> ë©´ë¥˜ 1ì ‘ì‹œ (20%)</div>
          <div class="legend-item"><span class="legend-color c3"></span> í¬ì¼“ í•«íŒ© (20%)</div>
          <div class="legend-item"><span class="legend-color c4"></span> ë‹¹ì¼ ë§Œì› í• ì¸ (10%)</div>
          <div class="legend-item"><span class="legend-color c5"></span> ì¬ë°©ë¬¸ 50% í• ì¸ (10%)</div>
          <div class="legend-item"><span class="legend-color c6"></span> ê½ (20%)</div>
        </div>

      </div>
      <!-- 2ì»¬ëŸ¼ ë -->

      <!-- ì‹œë“œ ë²ˆí˜¸ ë¼ë””ì˜¤ ë²„íŠ¼ -->
      <div class="seed-buttons">
        <label><input type="radio" name="seed" class="seed-btn" value="1" checked>1</label>
        <label><input type="radio" name="seed" class="seed-btn" value="2">2</label>
        <label><input type="radio" name="seed" class="seed-btn" value="3">3</label>
        <label><input type="radio" name="seed" class="seed-btn" value="4">4</label>
        <label><input type="radio" name="seed" class="seed-btn" value="5">5</label>
        <label><input type="radio" name="seed" class="seed-btn" value="6">6</label>
      </div>

      <button class="btn-spin" id="spinButton">ë£°ë › ëŒë¦¬ê¸° ğŸ²</button>

      <div class="game-result" id="resultText">ì‹œë“œ ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ê³  ë£°ë ›ì„ ëŒë ¤ë³´ì„¸ìš”.</div>
    </div>

    <script>
      let app_wheel = {};
      app_wheel.rotation = 0;

      (function () {
        const wheel = document.getElementById("wheel");
        const spinButton = document.getElementById("spinButton");
        const resultText = document.getElementById("resultText");

        const seedButtons = document.querySelectorAll("input[name='seed']");

        const prizes = [
          { label: "ê½", prob: 0.2, ds:0, de:72},
          { label: "ì¬ë°©ë¬¸ì‹œ 50% í• ì¸", prob: 0.1, ds:72, de:108},
          { label: "ë‹¹ì¼ ê²°ì œê¸ˆì•¡ ë§Œì› í• ì¸", prob: 0.1, ds:108, de:144},
          { label: "í¬ì¼“ í•«íŒ©", prob: 0.2, ds:144, de:216},
          { label: "ë©´ë¥˜ 1ì ‘ì‹œ", prob: 0.2, ds:216, de:288},
          { label: "ìº” ìŒë£Œ 1ê°œ", prob: 0.2, ds:288, de:360},
        ];



        const sectorAngles = [0, 72, 144, 216, 252, 288, 360];
        const pointerAngle = 90;

        let currentRotation = 0;
        let isSpinning = false;

        function getSeed() {
          return parseInt(document.querySelector("input[name='seed']:checked").value, 10);
        }

        function getSeededRandom(seed) {
          const base = Math.random();
          const offset = (seed - 1) / 6;
          return (base + offset) % 1;
        }

        function pickPrizeIndex(seed) {
          const r = getSeededRandom(seed);
          let acc = 0;
          for (let i = 0; i < prizes.length; i++) {
            acc += prizes[i].prob;
            if (r <= acc) return i;
          }
          return prizes.length - 1;
        }

        function whichPrize(){
          let wheelDegree = Math.floor(currentRotation) % 360;
          let selectedPrize = null;
          for (let i = 0; i < prizes.length; i++) {
            if (prizes[i].ds <= wheelDegree && wheelDegree < prizes[i].de) {
              selectedPrize = prizes[i];
            }
          }
          return selectedPrize;
        }

        function spinWheel() {
          if (isSpinning) return;

          const seed = getSeed();
          isSpinning = true;
          spinButton.disabled = true;
          resultText.textContent = "ë£°ë ›ì´ ëŒê³  ìˆì–´ìš”...";

          const index = pickPrizeIndex(seed);
          // const chosen = prizes[index];

          const start = sectorAngles[index];
          const end = sectorAngles[index + 1];

          const margin = 3;
          const minA = start + margin;
          const maxA = end - margin;

          const originalAngle = minA + Math.random() * (maxA - minA);

          const currentMod = ((currentRotation % 360) + 360) % 360;
          const desiredMod = (pointerAngle - originalAngle + 360) % 360;

          const newRotation =
            currentRotation +
            (360 * 3 * seed) +
            ((desiredMod - currentMod + 360) % 360);

          currentRotation = newRotation;

          const chosen = whichPrize();

          wheel.style.transition = "transform 2.6s cubic-bezier(0.22, 0.61, 0.35, 1)";
          wheel.style.transform = `rotate(${newRotation}deg)`;

          setTimeout(() => {
            isSpinning = false;
            spinButton.disabled = false;

            if (chosen.label === "ê½") {
              resultText.innerHTML = `ì•„ì‰½ì§€ë§Œ ì´ë²ˆì—ëŠ” <strong>ê½</strong>ì…ë‹ˆë‹¤.`;
            } else {
              resultText.innerHTML = `ì¶•í•˜í•©ë‹ˆë‹¤! <strong>${chosen.label}</strong> ë‹¹ì²¨!`;
            }
          }, 2700);
        }

        spinButton.addEventListener("click", spinWheel);
      })();
    </script>

  </body>
</html>
