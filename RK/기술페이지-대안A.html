<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hero Highlight Demo — Paired 3 Columns (Multi-spot)</title>
    <style>
      :root {
        --ink: #0f172a;
        --muted: #475569;
        --line: #e2e8f0;
        --accent: #2563eb;
        --accent-2: #0ea5e9;
        --paper: #ffffff;
        --shadow: 0 10px 26px rgba(2, 6, 23, 0.08), 0 2px 8px rgba(2, 6, 23, 0.06);
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans KR", Arial, sans-serif;
        color: var(--ink);
        background: #e2e8f0;
      }
      .wrap {
        max-width: 1200px;
        margin: 24px auto;
        padding: 0 16px 42px;
      }

      /* 공통 카드 */
      .doc-card {
        background: #fff;
        border: 1px solid rgba(148, 163, 184, 0.3);
        border-radius: 16px;
        box-shadow: 0 14px 40px rgba(15, 23, 42, 0.03);
        padding: 1.3rem 1.4rem 1.4rem;
        margin-bottom: 1.2rem;
      }
      .doc-card-header {
        display: flex;
        align-items: baseline;
        gap: 0.55rem;
        margin-bottom: 1rem;
      }
      .doc-card-title {
        font-size: 1.02rem;
        font-weight: 800;
        color: var(--ink);
      }
      .doc-card-meta {
        font-size: 0.74rem;
        color: var(--muted);
      }
      .doc-card-body {
        margin-top: 0.5rem;
      }

      /* 페이지 헤더 (기술서 안쪽) */
      .page-head {
        margin: 0.2rem 0 1.1rem;
      }
      .page-head .title {
        font-size: clamp(1.4rem, 2.4vw, 1.8rem);
        font-weight: 800;
        letter-spacing: -0.01em;
        color: var(--ink);
      }
      .page-head .subtitle {
        margin-top: 0.38rem;
        font-size: 0.93rem;
        color: var(--muted);
        line-height: 1.5;
      }

      /* Hero */
      .hero {
        margin: 10px;
        position: relative;
        border: 1px solid var(--line);
        border-radius: 14px;
        overflow: hidden;
        background: #f1f5f9;
      }
      .hero img {
        display: block;
        width: 100%;
        object-fit: cover;
      }
      .hero .dim {
        position: absolute;
        inset: 0;
        background: rgba(15, 23, 42, 0);
        transition: background 0.2s ease;
      }

      .hero.highlighted .dim {
        background: rgba(15, 23, 42, 0.35);
        pointer-events: auto;
      }
      .spot {
        position: absolute;
        border: 2px solid rgba(37, 99, 235, 0);
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
        border-radius: 12px;
        background: transparent;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.18s, box-shadow 0.18s, border-color 0.18s;
      }
      .spot.on {
        opacity: 0.3;
        border-color: rgba(37, 99, 235, 0.95);
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.25), 0 10px 28px rgba(2, 6, 23, 0.25);
        background-color: #e7ab1c;
      }
      @media (prefers-reduced-motion: reduce) {
        .spot,
        .hero .dim {
          transition: none;
        }
      }

      /* 카드 목록 (기본 3컬럼) */
      .pairs {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 0.9rem;
        margin-top: 14px;
      }
      /* 2컬럼 전용 */
      .pairs.is-2col {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .pair {
        display: grid;
        grid-template-rows: auto 1fr;
        gap: 10px;
        border: 1px solid var(--line);
        border-radius: 14px;
        background: var(--paper);
        box-shadow: var(--shadow);
        cursor: pointer;
        user-select: none;
        transition: transform 0.12s, border-color 0.12s, box-shadow 0.12s;
      }
      .pair:hover {
        transform: translateY(-2px);
        border-color: #c7d2fe;
        box-shadow: 0 12px 26px rgba(37, 99, 235, 0.08);
      }
      .pair.active {
        outline: 2px solid #e7ab1c;
        outline-offset: 2px;
      }
      .pair .thumb {
        margin: 10px;
        border-bottom: 1px solid var(--line);
        overflow: hidden;
        border-top-left-radius: 14px;
        border-top-right-radius: 14px;
        position: relative;
      }

      .pair .thumb figcaption {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(15, 23, 42, 0.9);
        color: #fff;
        font-size: 0.7rem;
        padding: 3px 9px 4px;
        border-radius: 999px;
        line-height: 1;
        letter-spacing: -0.02em;
        box-shadow: 0 4px 10px rgba(15, 23, 42, 0.12);
      }

      .pair .thumb img {
        display: block;
        width: 100%;
        object-fit: cover;
      }
      .pair .note {
        padding: 0.9rem 0.95rem 1rem;
        background: #f8fafc;
        border-bottom-left-radius: 14px;
        border-bottom-right-radius: 14px;
      }
      .pair .note .k {
        font-size: 0.78rem;
        color: var(--accent-2);
        letter-spacing: 0.06em;
        text-transform: uppercase;
      }
      .pair .note .v {
        font-weight: 800;
        margin-top: 0.15rem;
      }
      .pair .note .d {
        color: var(--muted);
        margin-top: 0.2rem;
        font-size: 0.95rem;
      }

      @media (max-width: 760px) {
        .pairs {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 500px) {
        figure.hero {
          display: none;
        }
        .pairs,
        .pairs.is-2col {
          grid-template-columns: 1fr;
        }
      }

      /* =========================
         기술서 #3 전용 가로 1컬럼
         ========================= */
      .doc-card-body[data-doc="3"] .pair {
        display: flex;
        gap: 12px;
        align-items: stretch;
      }
      .doc-card-body[data-doc="3"] .pair .thumb {
        margin: 0;
        border-bottom: none;
        border-radius: 14px;
        border: 1px solid var(--line);
        flex: 0 0 50%;
        max-width: 460px; /* ✅ 이미지 최대 폭 */
        background: #fff;
      }
      .doc-card-body[data-doc="3"] .pair .thumb img {
        width: 100%;
        height: auto;
      }
      .doc-card-body[data-doc="3"] .pair .note {
        flex: 1 1 50%;
        border-bottom-left-radius: 14px;
        border-bottom-right-radius: 14px;
      }

      /* 500px 이하에서 다시 세로 */
      @media (max-width: 600px) {
        .doc-card-body[data-doc="3"] .pair {
          flex-direction: column;
        }
        .doc-card-body[data-doc="3"] .pair .thumb,
        .doc-card-body[data-doc="3"] .pair .note {
          flex: 1 1 100%;
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <main class="wrap">
      <!-- 기술서 #1 : 3컬럼 -->
      <section class="doc-card" aria-label="기술서 #1">
        <header class="doc-card-header">
          <div class="doc-card-title">기술서 #1</div>
          <div class="doc-card-meta">이미지-카드 연동 데모 (3컬럼)</div>
        </header>
        <div class="doc-card-body" data-doc="1">
          <header class="page-head">
            <div class="title">큰 이미지 하이라이트 데모</div>
            <p class="subtitle">카드 선택에 따라 위의 기술 도식도 특정 영역을 하이라이트하는 구조입니다.</p>
          </header>

          <figure class="hero" id="hero-1">
            <img src="https://rondakorea.mycafe24.com/images/sTechnology_img1.png" alt="Technical schematic" />
            <div class="dim"></div>
            <div class="spot" id="spot1-esc" style="left: 18%; top: 54%; width: 20%; height: 22%"></div>
            <div class="spot" id="spot1-sh" style="left: 60%; top: 18%; width: 24%; height: 22%"></div>
            <div class="spot" id="spot1-rf" style="left: 52%; top: 54%; width: 22%; height: 24%"></div>
          </figure>

          <section class="pairs" id="pairs-1">
            <article class="pair" data-hit="spot1-esc, spot1-rf">
              <figure class="thumb">
                <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=ESC+Detail" alt="" />
                <figcaption>본이미지 캡셥</figcaption>
              </figure>
              <div class="note">
                <div class="k">Focus ①</div>
                <div class="v">Vaporizer</div>
                <div class="d">
                  반도체 공정에 사용하는 Liquid gas(Precursor)를 정말한 온도와 압력 조건에서 기화시켜 균일한 농도, 유량을 Process Chamber로
                  공급하는 장치이며, CVD 및 ALD 공정의 품질과 안정성을 극대화 시키는 장치입니다.
                </div>
              </div>
            </article>
            <article class="pair" data-hit="spot1-sh">
              <figure class="thumb">
                <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=Showerhead" alt="" />
                <figcaption>본이미지 캡셥</figcaption>
              </figure>
              <div class="note">
                <div class="k">Focus ②</div>
                <div class="v">Gas Distribution</div>
                <div class="d">Showerhead 미세 홀 분포 최적화로 반응 균일도 향상.</div>
              </div>
            </article>
            <article class="pair" data-hit="spot1-rf">
              <figure class="thumb">
                <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=RF+Electrode" alt="" />
              </figure>
              <div class="note">
                <div class="k">Focus ③</div>
                <div class="v">RF Bias & Matching</div>
                <div class="d">전극 형상/임피던스 매칭으로 이온 에너지/플럭스 제어.</div>
              </div>
            </article>
          </section>
        </div>
      </section>

      <!-- 기술서 #2 : 2컬럼 -->
      <section class="doc-card" aria-label="기술서 #2">
        <header class="doc-card-header">
          <div class="doc-card-title">기술서 #2</div>
          <div class="doc-card-meta">이미지-카드 연동 데모 (2컬럼)</div>
        </header>
        <div class="doc-card-body" data-doc="2">
          <header class="page-head">
            <div class="title">큰 이미지 하이라이트 데모</div>
            <p class="subtitle">같은 콘텐츠이지만, 하단 카드가 2컬럼 레이아웃인 버전입니다.</p>
          </header>

          <figure class="hero" id="hero-2">
            <img src="https://rondakorea.mycafe24.com/images/sTechnology_img1.png" alt="Technical schematic" />
            <div class="dim"></div>
            <div class="spot" id="spot2-esc" style="left: 18%; top: 54%; width: 20%; height: 22%"></div>
            <div class="spot" id="spot2-sh" style="left: 60%; top: 18%; width: 24%; height: 22%"></div>
            <div class="spot" id="spot2-rf" style="left: 52%; top: 54%; width: 22%; height: 24%"></div>
          </figure>

          <section class="pairs is-2col" id="pairs-2">
            <article class="pair" data-hit="spot2-esc, spot2-rf">
              <figure class="thumb">
                <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=ESC+Detail" alt="" />
                <figcaption>본이미지 캡셥</figcaption>
              </figure>
              <div class="note">
                <div class="k">Focus ①</div>
                <div class="v">ESC / Thermal Coupling</div>
                <div class="d">웨이퍼 클램핑 및 He backside 압력과 연동한 열전달 균일성.</div>
              </div>
            </article>
            <article class="pair" data-hit="spot2-sh">
              <figure class="thumb">
                <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=Showerhead" alt="" />
              </figure>
              <div class="note">
                <div class="k">Focus ②</div>
                <div class="v">Gas Distribution</div>
                <div class="d">Showerhead 미세 홀 분포 최적화로 반응 균일도 향상.</div>
              </div>
            </article>
          </section>
        </div>
      </section>

      <!-- 기술서 #3 : 1컬럼 가로형 -->
      <section class="doc-card" aria-label="기술서 #3">
        <header class="doc-card-header">
          <div class="doc-card-title">기술서 #3</div>
          <div class="doc-card-meta">이미지-카드 연동 데모 (1컬럼 가로)</div>
        </header>
        <div class="doc-card-body" data-doc="3">
          <header class="page-head">
            <div class="title">큰 이미지 하이라이트 데모</div>
            <p class="subtitle">한 개의 아티클을 좌우 50:50으로 배치한 버전입니다.</p>
          </header>

          <figure class="hero" id="hero-3">
            <img src="https://rondakorea.mycafe24.com/images/sTechnology_img1.png" alt="Technical schematic" />
            <div class="dim"></div>
            <div class="spot" id="spot3-esc" style="left: 18%; top: 54%; width: 20%; height: 22%"></div>
            <div class="spot" id="spot3-sh" style="left: 60%; top: 18%; width: 24%; height: 22%"></div>
            <div class="spot" id="spot3-rf" style="left: 52%; top: 54%; width: 22%; height: 24%"></div>
          </figure>

          <article class="pair" data-hit="spot3-esc, spot3-rf">
            <figure class="thumb">
              <img src="https://dummyimage.com/600x380/e8eef7/0f172a&text=ESC+Detail" alt="" />
              <figcaption>ESC / RF</figcaption>
            </figure>
            <div class="note">
              <div class="k">Focus</div>
              <div class="v">ESC & RF Coupling Zone</div>
              <div class="d" style="margin-top:0.3rem;">
                ESC와 RF 전극이 동시에 관여하는 챔버 하부 영역을 설명하는 카드입니다. 위 도식도에서 해당 카드를 클릭하면 노란색 반투명
                하이라이트가 표시되고, dim을 다시 클릭하면 해제됩니다.
              </div>
            </div>
          </article>
        </div>
      </section>
    </main>

    <script>
      (function () {
        const docs = document.querySelectorAll(".doc-card-body");

        docs.forEach((doc) => {
          const hero = doc.querySelector(".hero");
          const spots = hero ? [...hero.querySelectorAll(".spot")] : [];
          const pairs = doc.querySelectorAll(".pair[data-hit]");

          function clearAll() {
            if (!hero) return;
            hero.classList.remove("highlighted");
            spots.forEach((s) => s.classList.remove("on"));
            pairs.forEach((p) => p.classList.remove("active"));
          }

          function activate(ids, origin) {
            if (!hero) return;
            const list = String(ids)
              .split(/[,\s]+/)
              .filter(Boolean);

            spots.forEach((s) => s.classList.remove("on"));

            let any = false;
            list.forEach((id) => {
              const t = doc.querySelector("#" + id);
              if (t) {
                t.classList.add("on");
                any = true;
              }
            });
            hero.classList.toggle("highlighted", any);

            pairs.forEach((p) => p.classList.remove("active"));
            if (origin) origin.classList.add("active");
          }

          pairs.forEach((card) => {
            card.addEventListener("click", () => activate(card.dataset.hit, card));
          });

          if (hero) {
            hero.addEventListener("click", (e) => {
              if (e.target === hero || e.target.classList.contains("dim")) clearAll();
            });
          }

          window.addEventListener("keydown", (e) => {
            if (e.key === "Escape") clearAll();
          });
        });
      })();
    </script>
  </body>
</html>
