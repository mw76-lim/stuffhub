<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ëª¨ê¸°ì—… ê°€ì¹˜ìƒìŠ¹ â†’ ìíšŒì‚¬ ìˆ˜ìµêµ¬ì¡° ê°œì„  íë¦„ë„</title>
<style>
  :root{
    --bg:#f7f9fc; --paper:#ffffff; --ink:#1c233a; --muted:#5f6d8f; --line:rgba(0,0,0,.12);
    --accent:#ee8a00; --navy:#1b2b52; --aqua:#2fadbe; --mint:#4eb997; --gold:#f6c75e;
  }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:'Pretendard','Noto Sans KR',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .wrap{max-width:1140px;margin:40px auto;padding:28px;background:var(--paper);border:1px solid var(--line);border-radius:18px;box-shadow:0 12px 28px rgba(27,43,82,.08)}
  h1{margin:0 0 6px;font-size:28px;letter-spacing:-.02em;color:var(--navy)}
  p.lead{margin:0 0 18px;color:var(--muted)}

  /* Grid + overlay canvas */
  .flow{position:relative}
  .grid{display:grid;grid-template-columns:1.05fr .9fr 1.15fr;gap:80px;align-items:start;position:relative;z-index:1}
  .col{background:#fff;border:1px solid var(--line);border-radius:16px;padding:16px 14px 18px;box-shadow:0 4px 16px rgba(0,0,0,.05)}
  .col h2{margin:2px 0 10px;font-size:18px;letter-spacing:-.01em;color:var(--navy)}
  .node{position:relative;border:1px solid var(--line);border-radius:12px;padding:12px 12px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.05);display:flex;gap:10px;align-items:flex-start}
  .node+.node{margin-top:10px}
  .node .icon{width:26px;height:26px;border-radius:8px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#ffb24d);color:#fff;flex:0 0 26px}
  .icon.navy{background:linear-gradient(135deg,#263964,#1b2b52)}
  .icon.mint{background:linear-gradient(135deg,#7fd9c3,#4eb997)}
  .icon.aqua{background:linear-gradient(135deg,#63d0df,#2fadbe)}
  .tag{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line);background:#fff;color:var(--navy)}
  .chip{font-size:12px;padding:3px 8px;border-radius:999px;border:1px solid var(--line);background:#fff;color:#333}
  .chip.up{color:#0b8a59;background:rgba(11,138,89,.1);border-color:rgba(11,138,89,.25)}
  .note{font-size:12px;color:var(--muted)}

  /* SVG overlay that truly connects nodes */
  .overlay{position:absolute;inset:0;z-index:0;pointer-events:none}
  svg{width:100%;height:100%;display:block}
  .arrow{fill:none;stroke:#91a3c7;stroke-width:2.2;opacity:.95}
  .arrow.strong{stroke:#1b2b52}
  .arrow.soft{stroke:#ee8a00}
  .arrow.good{stroke:#2fadbe}

  .foot{margin-top:16px;padding-top:10px;border-top:1px dashed var(--line);font-size:12px;color:var(--muted)}

  @media (max-width:1000px){.grid{grid-template-columns:1fr}}
  /* ì‘ì€ í™”ë©´ì—ì„œëŠ” ì„  ìˆ¨ê¹€ + ê°„ê²© ì¶•ì†Œ */
  @media (max-width: 980px){
    .overlay{ display:none; }
    .grid{ gap:20px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>ëª¨ê¸°ì—… ê°€ì¹˜ ìƒìŠ¹ â†’ ìíšŒì‚¬ ìˆ˜ìµêµ¬ì¡° ê°œì„  íë¦„ë„</h1>
    <p class="lead">ê·¸ë£¹ í•µì‹¬ ì‚¬ì—…(ì¡°ì„ Â·ë°©ì‚°Â·ì—ë„ˆì§€ ë“±)ì˜ ê°€ì¹˜ ìƒìŠ¹ì´ ì†í•´ë³´í—˜ì‚¬ì— ë¯¸ì¹˜ëŠ” <strong>ì§Â·ê°„ì ‘ íŒŒê¸‰ê²½ë¡œ</strong>ë¥¼ ì‹¤ì œ ë…¸ë“œì™€ ì´ì–´ì§€ëŠ” í™”ì‚´í‘œë¡œ í‘œí˜„í–ˆìŠµë‹ˆë‹¤.</p>

    <div class="flow" id="flow">
      <!-- SVG overlay sits behind boxes and connects them dynamically -->
      <div class="overlay" aria-hidden="true">
        <svg id="wires" viewBox="0 0 100 100" preserveAspectRatio="none">
          
        </svg>
      </div>

      <div class="grid" id="grid">
        <!-- Col 1: Group Growth Drivers -->
        <div class="col">
          <h2>â‘  ê·¸ë£¹ ì„±ì¥ ë™ë ¥ (ìì‚°ê°€ì¹˜ â†‘)</h2>
          <div class="node" data-node="g1"><div class="icon">ğŸš¢</div><div>
            <strong>ì¡°ì„ /í•´ì–‘</strong> <span class="chip up">ìˆ˜ì£¼Â·ì‹¤ì  â†‘</span><br/>
            <span class="note">í•´ì–‘í”ŒëœíŠ¸/ìƒì„  íšŒë³µ â†’ ê¸°ì—…ê°€ì¹˜ ì¬í‰ê°€</span>
          </div></div>
          <div class="node" data-node="g2"><div class="icon navy">âš™ï¸</div><div>
            <strong>ë°©ì‚°/í•­ê³µìš°ì£¼</strong>  <span class="chip up">ìˆ˜ìš” í™•ëŒ€</span><br/>
            <span class="note">ìˆ˜ì£¼ì”ê³  â†‘ â†’ ì‹œì´Â·ì‹ ìš©ë„ ê°œì„ </span>
          </div></div>
          <div class="node" data-node="g3"><div class="icon">â˜€ï¸</div><div>
            <strong>ì—ë„ˆì§€/ì¼€ë¯¸ì¹¼</strong> <span class="chip up">ê·¸ë¦° ì „í™˜</span><br/>
            <span class="note">íƒœì–‘ê´‘Â·ESS ì„±ì¥ â†’ ê·¸ë£¹ ë°¸ë¥˜ ì—…</span>
          </div></div>
        </div>

        <!-- Col 2: Transmission Channels -->
        <div class="col">
          <h2>â‘¡ ì „ì´ ê²½ë¡œ (Transmission)</h2>
          <div class="node" data-node="t1"><div class="icon aqua">ğŸ’¹</div><div>
            <strong>íˆ¬ììì‚° ì„±ê³¼ ê°œì„ </strong><br/>
            <span class="note">ì£¼ì‹Â·ì±„ê¶ŒÂ·í€ë“œ ê°€ì¹˜/ë°°ë‹¹/ì´ì â†‘</span>
          </div></div>
          <div class="node" data-node="t2"><div class="icon navy">ğŸ¦</div><div>
            <strong>ê·¸ë£¹ ì‹ ìš©ë„ ê°œì„ </strong><br/>
            <span class="note">ì¡°ë‹¬ê¸ˆë¦¬ â†“ â†’ ìë³¸ì—¬ë ¥(RBC) â†‘</span>
          </div></div>
          <div class="node" data-node="t3"><div class="icon mint">ğŸ¤</div><div>
            <strong>ë¸Œëœë“œÂ·ì±„ë„ ì‹œë„ˆì§€</strong><br/>
            <span class="note">ì‹ ë¢°ë„ â†‘ â†’ ê°€ì…ì „í™˜ìœ¨/ë³´ì¥ì„± â†‘</span>
          </div></div>
          <div class="node" data-node="t4"><div class="icon">ğŸ—ï¸</div><div>
            <strong>ê³„ì—´ ë‚´ë¶€ ìˆ˜ìš” ì¦ê°€</strong><br/>
            <span class="note">í•´ìƒ/í™”ì¬/ì±…ì„ ë“± ê¸°ì—…ë³´í—˜ ì›ìˆ˜ë³´í—˜ë£Œ â†‘</span>
          </div></div>
        </div>

        <!-- Col 3: Impacts on HGI -->
        <div class="col">
          <h2>â‘¢ ìíšŒì‚¬ì—ì˜ ì˜í–¥</h2>
          <div class="node" data-node="h1"><div class="icon aqua">ğŸ“ˆ</div><div>
            <strong>ìš´ìš©ì´ìµë¥  â†‘</strong> (<span class="tag">íˆ¬ììˆ˜ìµ</span>)<br/>
            <span class="note">ì±„ê¶Œ/ëŒ€ì²´Â·ì£¼ì‹ ìˆ˜ìµì„± ê°œì„ </span>
          </div></div>
          <div class="node" data-node="h2"><div class="icon navy">ğŸ›¡ï¸</div><div>
            <strong>ìë³¸ê±´ì „ì„± â†‘</strong> (<span class="tag">RBC</span>)<br/>
            <span class="note">ì¡°ë‹¬ë¹„ìš© â†“ â†’ ì‹ ê·œìƒí’ˆÂ·ê°€ê²©ê²½ìŸë ¥</span>
          </div></div>
          <div class="node" data-node="h3"><div class="icon mint">ğŸ“Š</div><div>
            <strong>ë§¤ì¶œ ì„±ì¥</strong> (<span class="tag">ì›ìˆ˜ë³´í—˜ë£Œ</span>)<br/>
            <span class="note">ê¸°ì—…ë³´í—˜/ì¥ê¸°ë³´ì¥ì„± í™•ëŒ€</span>
          </div></div>
          <div class="node" data-node="h4"><div class="icon">ğŸ’µ</div><div>
            <strong>ì£¼ì£¼í™˜ì› ì—¬ë ¥</strong> (<span class="tag">ë°°ë‹¹/ìì‚¬ì£¼</span>)<br/>
            <span class="note">ì¤‘ì¥ê¸° ì£¼ì£¼ê°€ì¹˜ ê°œì„  ê°€ëŠ¥ì„±</span>
          </div></div>
          <div class="node" data-node="h5"><div class="icon navy">âš–ï¸</div><div>
            <strong>ì œì•½ ìš”ì¸</strong> (<span class="tag">IFRS17</span>)<br/>
            <span class="note">ê³„ì—´ì‚¬ ì£¼ê°€ â†‘ê°€ ì¦‰ì‹œ ì†ìµì— ì§ê²°ë˜ì§„ ì•ŠìŒ</span>
          </div></div>
        </div>
      </div>
    </div>

    <div class="foot">â€» ì°½ í¬ê¸° ë³€ê²½ì´ë‚˜ ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒì—ì„œë„ í™”ì‚´í‘œê°€ ì‹¤ì œ ë°•ìŠ¤ë¥¼ ë”°ë¼ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.</div>
  </div>

<script>
(function(){
  const flow = document.getElementById('flow');
  const svg = document.getElementById('wires');
  const grid = document.getElementById('grid');

  // Define connections: [from, to, class]
  const edges = [
    // Left (g*) â†’ Middle (t*)
    ['g1','t1','strong'], ['g1','t2','soft'],
    ['g2','t1','strong'], ['g2','t2','soft'], ['g2','t3','good'],
    ['g3','t1','strong'], ['g3','t3','good'], ['g3','t4','soft'],
    // Middle (t*) â†’ Right (h*)
    ['t1','h1','good'], ['t2','h2','strong'], ['t3','h3','good'], ['t4','h4','soft'], ['t2','h5','strong']
  ];

  function rectCenter(el){
    const r = el.getBoundingClientRect();
    const c = flow.getBoundingClientRect();
    // return center relative to the overlay SVG
    return { x: r.left - c.left + r.width/2, y: r.top - c.top + r.height/2, w:r.width, h:r.height };
  }

  function anchorPoint(box, side){
    // side: 'right'|'left'|'top'|'bottom'
    const p = rectCenter(box);
    if(side==='right') return {x:p.x + p.w/2 + 2, y:p.y};
    if(side==='left')  return {x:p.x - p.w/2 - 2, y:p.y};
    if(side==='top')   return {x:p.x, y:p.y - p.h/2 - 2};
    if(side==='bottom')return {x:p.x, y:p.y + p.h/2 + 2};
    return {x:p.x, y:p.y};
  }

  function pathD(fromPt, toPt){
    // Smooth cubic Bezier between points with horizontal bias
    const dx = (toPt.x - fromPt.x);
    const mid = Math.max(40, Math.abs(dx)*0.35);
    const c1x = fromPt.x + mid, c1y = fromPt.y;
    const c2x = toPt.x - mid,   c2y = toPt.y;
    return `M ${fromPt.x} ${fromPt.y} C ${c1x} ${c1y}, ${c2x} ${c2y}, ${toPt.x} ${toPt.y}`;
  }

  function draw(){
    const r = flow.getBoundingClientRect();
    // ì‘ì€ í­ì—ì„œëŠ” ì„  ê·¸ë¦¬ì§€ ì•ŠìŒ
    const minWidth = 980 - 50; // ì„ê³„ê°’
    if(r.width < minWidth){
      svg.style.display = 'none';
      // ê¸°ì¡´ ì„  ì§€ìš°ê¸°
      while(svg.lastChild) svg.removeChild(svg.lastChild);
      return;
    } else {
      svg.style.display = 'block';
    }

    svg.setAttribute('viewBox', `0 0 ${r.width} ${r.height}`);

    // clear (defsê°€ ì—†ìœ¼ë¯€ë¡œ ì „ë¶€ ì œê±°)
    while(svg.lastChild) svg.removeChild(svg.lastChild);

    // cache nodes
    const cache = new Map();
    document.querySelectorAll('[data-node]').forEach(n=>cache.set(n.dataset.node, n));

    // build edges
    edges.forEach(([a,b,cls])=>{
      const A = cache.get(a), B = cache.get(b);
      if(!A || !B) return;
      const from = anchorPoint(A,'right');
      const to   = anchorPoint(B,'left');
      const p = document.createElementNS('http://www.w3.org/2000/svg','path');
      p.setAttribute('d', pathD(from,to));
      p.setAttribute('class', `arrow ${cls||''}`);
      svg.appendChild(p);
    });
  }

  // Observe layout changes
  const ro = new ResizeObserver(draw);
  ro.observe(grid); ro.observe(flow);
  window.addEventListener('resize', draw);
  window.addEventListener('orientationchange', draw);
  window.addEventListener('load', draw);
  if(document.fonts && document.fonts.ready){ document.fonts.ready.then(draw); }

  // Redraw after images load if any
  const imgs = grid.querySelectorAll('img');
  imgs.forEach(img=>{ if(!img.complete) img.addEventListener('load', draw); });
})();
</script>
</body>
</html>
